<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="css/personstyle.css">
    <script src="js/jquery-3.0.0.min.js"></script>
</head>
<body>
<div class="content">
    <div class="content-body">
        <div class="setting-title">个人中心</div>
        <div class="setting-content">
            <div class="setting-menu">
                <div class="menu-title active">
                    <h3>个人资料</h3>
                </div>
                <ul class="menu-list">
                    <li class="menu-item basic-link on">
                        <a href="#nowhere">基本资料</a>
                    </li>
                    <li class="menu-split"> </li>
                    <li class="menu-item img-link">
                        <a href="#nowhere">头像设置</a>
                    </li>
                    <li class="menu-split"> </li>
                </ul>
            </div>
            <div class="setting-detail">
                <div class="detail-content">
                    <div class="detail-title">基本资料 <span>隐藏/显示</span></div>
                    <form id="detail" class="detail-form" method="post" action="">
                        <div class="row">
                            <input required='required' type='text'>
                            <label alt='请输入昵称' placeholder='呢称'></label>
                        </div>
                        <div class="switch">
                            <input type="checkbox" id="control" class="control">
                            <label for="control" class="checkbox"></label>
                        </div>
                        <div class="row">
                            <input required='required' type='text'>
                            <label alt='请输入邮箱' placeholder='Email'></label>
                        </div>
                        <div class="switch">
                            <input type="checkbox" id="control1" class="control">
                            <label for="control1" class="checkbox"></label>
                        </div>
                        <div class="row">
                            <input required=required'' type='text'>
                            <label alt='请输入QQ' placeholder='QQ'></label>
                        </div>
                        <div class="switch">
                            <input type="checkbox" id="contro2" class="control">
                            <label for="contro2" class="checkbox"></label>
                        </div>

                        <div class="row">
                            <input required='required' type='text'>
                            <label alt='请输入微信' placeholder='微信'></label>
                        </div>
                        <div class="switch">
                            <input type="checkbox" id="contro3" class="control">
                            <label for="contro3" class="checkbox"></label>
                        </div>
                        <div class="row">
                            <input required='required' type='text'>
                            <label alt='请输入微博' placeholder='微博'></label>
                        </div>
                        <div class="switch">
                            <input type="checkbox" id="contro4" class="control">
                            <label for="contro4" class="checkbox"></label>
                        </div>
                        <div class="row">
                            <div class="row-f">
                                <input required='required' type='text' class="data">
                                <label alt='请输入Facebook' placeholder='Facebook'></label>
                            </div>
                            <div class="row-s">
                                <input required='required' type='text' class="data">
                                <label alt='地址' placeholder='地址'></label>
                            </div>
                        </div>
                        <div class="switch">
                            <input type="checkbox" id="contro5" class="control">
                            <label for="contro5" class="checkbox"></label>
                        </div>
                        <div class="row">
                            <div class="row-f">
                                <input required='required' type='text' class="data">
                                <label alt='请输入G +' placeholder='G +'></label>
                            </div>
                            <div class="row-s">
                                <input required='required' type='text' class="data">
                                <label alt='地址' placeholder='地址'></label>
                            </div>
                        </div>
                        <div class="switch">
                            <input type="checkbox" id="contro6" class="control" checked>
                            <label for="contro6" class="checkbox"></label>
                        </div>
                        <div class="row">
                            <div class="row-f">
                                <input required='required' type='text' class="data">
                                <label alt='请输入W P' placeholder='W P'></label>
                            </div>
                            <div class="row-s">
                                <input required='required' type='text' class="data">
                                <label alt='地址' placeholder='地址'></label>
                            </div>
                        </div>
                        <div class="switch">
                            <input type="checkbox" id="contro7" class="control">
                            <label for="contro7" class="checkbox"></label>
                        </div>
                        <div class="row">
                            <div class="row-f">
                                <input required='required' type='text' class="data">
                                <label alt='请输入论坛' placeholder='论坛'></label>
                            </div>
                            <div class="row-s">
                                <input required='required' type='text' class="data">
                                <label alt='地址' placeholder='地址'></label>
                            </div>
                        </div>
                        <div class="switch">
                            <input type="checkbox" id="contro8" class="control">
                            <label for="contro8" class="checkbox"></label>
                        </div>
                        <div class="row">
                            <div class="row-f">
                                <input required='required' type='text' class="data">
                                <label alt='请输入博客' placeholder='博客'></label>
                            </div>
                            <div class="row-s">
                                <input required='required' type='text' class="data">
                                <label alt='地址' placeholder='地址'></label>
                            </div>
                        </div>
                        <div class="switch">
                            <input type="checkbox" id="contro9" class="control">
                            <label for="contro9" class="checkbox"></label>
                        </div>
                        <div class="row">
                            <div class="row-f">
                                <input required='required' type='text' class="data">
                                <label alt='自定义' placeholder=''></label>
                            </div>
                            <div class="row-s">
                                <input required='required' type='text' class="data">
                                <label alt='自定义' placeholder=''></label>
                            </div>
                        </div>
                        <div class="switch">
                            <input type="checkbox" id="contro10" class="control">
                            <label for="contro10" class="checkbox"></label>
                        </div>



                        <textarea id="intro" name="intro" placeholder="个人介绍:"></textarea>
                        <input class="sub su" type="button" name="b1" value="保存修改">
                        <a href="" class="return-page">返回首页</a>
                    </form>
                </div>
            </div>
            <div class="setting-img">
                <div class="detail-content">
                    <div class="detail-title">头像设置</div>
                    <div class="img-content">
                        <div id="result">
                            <img id="imgcontent">
                        </div>
                        <form name="form1" id="form1" enctype="multipart/form-data">
                            <label class="uibutton" for="photo">选择头像</label>
                            <input type="file" name="photo" id="photo" accept="image/*">
                            <br>
                            <input class="sub" type="button" name="b1" value="提交图片" onclick="fsubmit()">
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    var li=document.querySelectorAll(".menu-item");
    var s_img=document.querySelector(".setting-img");
    var s_det=document.querySelector(".setting-detail");
    for(var i=0;i<li.length;i++){
        li[0].onclick= function () {
            li[0].classList.add("on");
            li[1].classList.remove("on");
            s_img.style.display='none';
            s_det.style.display='block';
        };
        li[1].onclick= function () {
            li[1].classList.add("on");
            li[0].classList.remove("on");
            s_img.style.display='block';
            s_det.style.display='none';
        };
    }

//    预览图片
    var input=document.querySelector("#photo");
    input.addEventListener("change",loadImg,false);
    function loadImg(){
        //获取文件
        var file = $("#form1").find("input")[0].files[0];

        //创建读取文件的对象
        var reader = new FileReader();

        //创建文件读取相关的变量
        var imgFile;

        //为文件读取成功设置事件
        reader.onload=function(e) {
            imgFile = e.target.result;
            $("#imgcontent").attr('src', imgFile);
        };

        //正式读取文件
        reader.readAsDataURL(file);
    }

    //通过ajax预览
    function fsubmit(){
        var data = new FormData($('#form1')[0]);
        $.ajax({
            url: '...',
            type: 'POST',
            data: data,
            dataType: 'JSON',
            cache: false,
            processData: false,
            contentType: false
        }).done(function(ret){
            if(ret['isSuccess']){
                var result = '';
                result += '<img src="' + ret['photo']  + '" width="100">';
                $('#result').html(result);
            }else{
                alert('提交失敗');
            }
        });
        return false;
    }
</script>
</body>
</html>